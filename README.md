# Kamara SSE scheme

## Постановка задачи
Реализовать криптографическую защиту данных пользовательских файлов при передаче и хранении на удалённом сервере. Обеспечить возможность поиска по ключевому слову.

## Описание
Для выполнения поставленной задачи разработано два консольных приложения (client и server), функция выделение имени файла из указанного клиентом пути к передаваемому файлу
(в целях использования их как уникальных id(f)), функция генерации ключа на основе стандарта PBKDF2, шифрование и дешифрование файлов с использованием алгоритма AES-256 в режиме CBC (Cipher Block Chaining), 
для проверки целостности используется HMAC - код проверки подлинности сообщений, использующий односторонние хеш-функции (в качестве хеш-функции используется SHA-256). Для согласования пользовательских типов данных между клиентом и сервером используется общая директория common с файлами base64.h (обеспечивает преобразование данных для передачи данных между клиентом и сервером) и файл sse_schemes.h, содержащий структуры токенов.

## Инструментарий
- Для шифрования и дешифрования применяется алгоритм AES-256 в режиме CBC из библиотек OpenSSL
- Функция генерации ключа основана на стандарте PBKDF2
- Для единой точки доступа к классу 'encryption' используется паттерн **Singleton**

## Требования
- Дистрибутив Linux
- CMake v3.5 или выше
- Компилятор с поддержкой C++17
- OpenSSL (dev-пакет)
- Boost library

## Установка зависимостей
```bash
sudo apt update
sudo apt install -y build-essential cmake libssl-dev
sudo apt install libboost-all-dev
```

## Сборка
   Откройте командную строку и перейдите в директорию с файлом CMakeLists.txt
   ```bash
    mkdir build
    cd build
    cmake ..
    make
   ```
## Использование
   ```bash
   cd bin
   # Запуск сервера в одном терминале
   ./server
   # Запуск клиента
   ./client <key>
   ```
## Примеры
   ```bash
   # Добавить в базу данных подготовленный файл file_1.txt
   ./client some_pwd
   add ../../../plain_texts/file_1.txt
   # Получить список id файлов с искомым словом (в нижнем регистре)
   search geonosis
   ```
## Структура проекта

```
.
├── CMakeLists.txt
├── client
│   ├── cipher.cpp
│   ├── cipher.h
│   ├── client.cpp
│   ├── encryption.cpp
│   ├── encryption.h
│   ├── token_gen.cpp
│   └── token_gen.h
├── common
│   ├── base64.cpp
│   ├── base64.h
│   └── sse_types.h
└── server
    └── server.cpp
```
